<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>创建博客</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/editormd.css"/>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/editormd.js"></script>
</head>
<body>

<div>
    <div class="modal fade" id="settings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">历史消息(
                        <small>为你保存最多120条消息记录</small>
                        )
                    </h4>
                </div>
                <div class="modal-body">
                    <div id="selectTree" class="ztree" style="height:260px;overflow:auto; ">
                        <div class="alert alert-success">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            还没有收到任何评论呢！<a href="#">(了解如何使用MarkDown书写出层次分明，结构清晰的文章)</a>
                        </div>
                        <div style="text-align: center">
                            <p><span class="badge" style="background: red">未读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <p><span class="badge" style="background: red">未读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <p><span class="badge" style="background: red">未读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <p><span class="badge" style="background: red">未读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <p><span class="badge" style="background: red">未读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <p><span class="badge" style="background: green">已读</span><a href="#">Tyler-Smith</a>在文章 <a
                                    href="#">认识与入门MarkDown</a>中评论了你</p>
                            <ul class="pagination">
                                <li><a href="#">&laquo;</a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li class="disabled"><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#">&raquo;</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">全部设为已读</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <form id="form" method="POST" action="/edit">
        <div class="editormd" id="editormd">
            <textarea class="editormd-markdown-textarea" name="editormd-markdown-doc"></textarea>

            <!-- html textarea 需要开启配置项 saveHTMLToTextarea == true -->
            <textarea class="editormd-html-textarea" name="editormd-html-code"></textarea>
        </div>
    </form>
    <script type="text/javascript">
        var testEditor;
        $(function () {
            testEditor = editormd("editormd", {
                width: "100%",
                height: "100%",
                path: '../lib/',
                toolbarIcons: function () {
                    return [
                        "undo", "redo", "|",
                        "bold", "del", "italic", "quote", "ucwords", "uppercase", "lowercase", "|",
                        "h1", "h2", "h3", "h4", "h5", "h6", "|",
                        "list-ul", "list-ol", "hr", "|",
                        "link", "reference-link", "image", "code", "preformatted-text", "code-block", "table", "datetime", "html-entities", "pagebreak", "|",
                        "goto-line", "watch", "preview", "fullscreen", "clear", "search", "|",
                        "help", "info", "||", "save", "giveup", "options"
                    ];
                },
                toolbarIconsClass: {
                    options: "fa-gears",
                    save: "fa-floppy-o",
                    giveup: "fa-trash-o"
                },
                toolbarIconTexts: {
                    //save: "保存",// 如果没有图标，则可以这样直接插入内容，可以是字符串或HTML标签
                },
                toolbarHandlers: {
                    /**
                     * @param {Object}      cm         CodeMirror对象
                     * @param {Object}      icon       图标按钮jQuery元素对象
                     * @param {Object}      cursor     CodeMirror的光标对象，可获取光标所在行和位置
                     * @param {String}      selection  编辑器选中的文本
                     */
                    options: function (cm, icon, cursor, selection) {
                        $('#settings').modal('show');
                    },
                    save: function (cm, icon, cursor, selection) {
                        ;
                    }
                },
                theme: "dark",
                previewTheme: "dark",
                editorTheme: "pastel-on-dark",
                codeFold: true,
                //syncScrolling : false,
                saveHTMLToTextarea: true,    // 保存 HTML 到 Textarea
                searchReplace: true,
                //watch : false,                // 关闭实时预览
                htmlDecode: "style,script,iframe|on*",            // 开启 HTML 标签解析，为了安全性，默认不开启
                //toolbar  : false,             //关闭工具栏
                //previewCodeHighlight : false, // 关闭预览 HTML 的代码块高亮，默认开启
                emoji: true,
                taskList: true,
                tocm: true,         // Using [TOCM]
                tex: true,                   // 开启科学公式TeX语言支持，默认关闭
                flowChart: true,             // 开启流程图支持，默认关闭
                sequenceDiagram: true,       // 开启时序/序列图支持，默认关闭,
                //dialogLockScreen : false,   // 设置弹出层对话框不锁屏，全局通用，默认为true
                //dialogShowMask : false,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true
                //dialogDraggable : false,    // 设置弹出层对话框不可拖动，全局通用，默认为true
                //dialogMaskOpacity : 0.4,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1
                //dialogMaskBgColor : "#000", // 设置透明遮罩层的背景颜色，全局通用，默认为#fff
                imageUpload: true,
                imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL: "./php/upload.php",

                onload: function () {
                    console.log('onload', this);
                }

            });
            testEditor.fullscreen();
        });
    </script>
</div>
</body>
</html>